import{$ as ke,A as me,B as se,F as ce,G as pe,H as ue,I as de,J as fe,O as _e,P as ze,Q as he,R as Ce,S as ge,T as Oe,U as ve,V as Se,W as be,X as De,Y as Te,Z as xe,_ as Ee,a as G,aa as ye,ba as Fe,ca as Ne,j as J,k as W,l as b,m as U,n as Y,o as K,p as Q,q as X,r as Z,s as ee,t as te,u as ne,v as ie,w as re,x as oe,y as ae,z as le}from"./chunk-KZ6OUEC6.js";import{Da as d,Ea as f,Hb as S,Jb as M,Kb as B,Lb as A,Mb as r,Nb as o,Ob as h,Pb as L,Qb as R,Sb as T,Vb as z,Xb as C,a as x,b as y,dc as g,ec as l,fc as O,gb as m,hb as D,ia as N,ic as P,ja as H,jc as $,jd as q,kc as j,na as V,ta as I,ua as w,uc as v,vb as u,zb as p}from"./chunk-YHI5BYX3.js";function F(n){let t=n.getDate().toString().padStart(2,"0"),e=(n.getMonth()+1).toString().padStart(2,"0"),a=n.getFullYear(),i=n.getHours().toString().padStart(2,"0"),s=n.getMinutes().toString().padStart(2,"0"),c=n.getSeconds().toString().padStart(2,"0");return`${a}-${e}-${t} ${i}:${s}:${c}`}var E=class n{constructor(t){this.http=t}getUserList(){return this.http.get("assets/list-role.json")}static \u0275fac=function(e){return new(e||n)(V(G))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function Me(n,t){if(n&1){let e=T();r(0,"tr")(1,"td",13),z("nzCheckedChange",function(i){let s=d(e).$implicit,c=C();return f(c.onItemChecked(s.id,i))}),o(),r(2,"td"),l(3),o(),r(4,"td"),l(5),o(),r(6,"td"),l(7),o(),r(8,"td"),l(9),o(),r(10,"td"),l(11),o(),r(12,"td"),l(13),o(),r(14,"td")(15,"a",14),z("click",function(){let i=d(e).$implicit,s=C();return f(s.updateHero(i))}),l(16,"\u4FEE\u6539"),o(),h(17,"nz-divider",15),r(18,"a",16),z("click",function(){let i=d(e).$implicit,s=C();return f(s.deleteHero(i==null?null:i.id,i==null?null:i.name))}),l(19,"\u5220\u9664"),o()()()}if(n&2){let e=t.$implicit,a=C();m(),p("nzChecked",a.setOfCheckedId.has(e.id))("nzLabel",e.name),m(2),O((e==null?null:e.name)||"-"),m(2),O((e==null?null:e.mobile)||"-"),m(2),O((e==null?null:e.roleName)||"-"),m(2),O((e==null?null:e.positionName)||"-"),m(2),O((e==null?null:e.remark)||"-"),m(2),O((e==null?null:e.createTime)||"-")}}function Be(n,t){if(n&1){let e=T();r(0,"button",17),z("click",function(){d(e);let i=C();return f(i.addHero())}),h(1,"span",18),l(2,"\u589E\u52A0"),o(),r(3,"button",19),z("click",function(){d(e);let i=C();return f(i.batchDelete())}),h(4,"span",20),l(5,"\u6279\u91CF\u5220\u9664"),o()}}function Ae(n,t){n&1&&l(0," \u8BF7\u8F93\u5165\u8D26\u53F7 ")}function Le(n,t){if(n&1&&u(0,Ae,1,0),n&2){let e=t.$implicit;S(e.errors!=null&&e.errors.required?0:-1)}}function Re(n,t){n&1&&l(0," \u8BF7\u8F93\u5165\u624B\u673A\u53F7 ")}function Pe(n,t){if(n&1&&u(0,Re,1,0),n&2){let e=t.$implicit;S(e.errors!=null&&e.errors.required?0:-1)}}function $e(n,t){n&1&&l(0," \u8BF7\u9009\u62E9\u89D2\u8272 ")}function je(n,t){if(n&1&&u(0,$e,1,0),n&2){let e=t.$implicit;S(e.errors!=null&&e.errors.required?0:-1)}}function qe(n,t){n&1&&l(0," \u8BF7\u9009\u62E9\u4F4D\u7F6E ")}function Ge(n,t){if(n&1&&u(0,qe,1,0),n&2){let e=t.$implicit;S(e.errors!=null&&e.errors.required?0:-1)}}function Je(n,t){n&1&&l(0," \u8BF7\u8F93\u5165\u5907\u6CE8 ")}function We(n,t){if(n&1&&u(0,Je,1,0),n&2){let e=t.$implicit;S(e.errors!=null&&e.errors.required?0:-1)}}function Ue(n,t){if(n&1){let e=T();L(0),r(1,"form",21),z("ngSubmit",function(){d(e);let i=C();return f(i.addHeroOk())}),r(2,"nz-form-item")(3,"nz-form-label",22),l(4,"\u59D3\u540D"),o(),r(5,"nz-form-control",23),h(6,"input",24),u(7,Le,1,1,"ng-template",null,2,v),o()(),r(9,"nz-form-item")(10,"nz-form-label",22),l(11,"\u624B\u673A\u53F7"),o(),r(12,"nz-form-control",23),h(13,"input",25),u(14,Pe,1,1,"ng-template",null,3,v),o()(),r(16,"nz-form-item")(17,"nz-form-label",22),l(18,"\u89D2\u8272"),o(),r(19,"nz-form-control",23)(20,"nz-select",26),h(21,"nz-option",27)(22,"nz-option",28)(23,"nz-option",29)(24,"nz-option",30),o(),u(25,je,1,1,"ng-template",null,4,v),o()(),r(27,"nz-form-item")(28,"nz-form-label",22),l(29,"\u4F4D\u7F6E"),o(),r(30,"nz-form-control",23)(31,"nz-select",31),h(32,"nz-option",32)(33,"nz-option",33)(34,"nz-option",34)(35,"nz-option",35)(36,"nz-option",36),o(),u(37,Ge,1,1,"ng-template",null,5,v),o()(),r(39,"nz-form-item")(40,"nz-form-label",22),l(41,"\u5907\u6CE8"),o(),r(42,"nz-form-control",23),h(43,"textarea",37),u(44,We,1,1,"ng-template",null,6,v),o()()(),R()}if(n&2){let e=g(8),a=g(15),i=g(26),s=g(38),c=g(45),_=C();m(),p("formGroup",_.validateForm),m(2),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",e),m(5),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",a),m(5),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",i),m(9),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",s),m(10),p("nzSpan",7),m(2),p("nzSpan",12)("nzErrorTip",c)}}var k=class n{constructor(t,e,a,i){this.service=t;this.modal=e;this.message=a;this.formBuilder=i;this.validateForm=this.formBuilder.group({id:[""],name:["",[b.required]],mobile:["",[b.required]],role:["",[b.required]],roleName:[""],position:["",[b.required]],positionName:[""],remark:["",[b.required]]})}listOfData=[];addHeroModal=!1;validateForm;roleType=[{label:"\u5251\u58EB",value:1},{label:"\u5C04\u624B",value:2},{label:"\u5766\u514B",value:3},{label:"\u6CD5\u5E08",value:4}];positionType=[{label:"\u4E0A\u5355",value:1},{label:"\u4E2D\u5355",value:2},{label:"\u6253\u91CE",value:3},{label:"ADC",value:4},{label:"\u8F85\u52A9",value:5}];checked=!1;indeterminate=!1;listOfCurrentPageData=[];setOfCheckedId=new Set;ngOnInit(){let t=localStorage.getItem("hero_data");t?this.listOfData=JSON.parse(t):this.getList()}getList(){this.service.getUserList().subscribe(t=>{this.listOfData=t||[],localStorage.setItem("hero_data",JSON.stringify(this.listOfData))})}deleteHero(t,e){this.modal.confirm({nzTitle:`\u662F\u5426\u786E\u8BA4\u5220\u9664\u82F1\u96C4${e}?`,nzOkText:"\u662F",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{let a=this.listOfData.find(i=>i.id==t);this.listOfData.splice(a,1),this.listOfData=[...this.listOfData],localStorage.setItem("hero_data",JSON.stringify(this.listOfData)),this.message.create("success","\u5220\u9664\u6210\u529F")},nzCancelText:"\u5426",nzOnCancel:()=>{}})}addHero(){this.validateForm.reset(),this.addHeroModal=!0}updateHero(t){this.addHeroModal=!0,this.validateForm.patchValue(x({},t))}addHeroCancel(){this.addHeroModal=!1}addHeroOk(){if(Object.values(this.validateForm.controls).forEach(i=>{i.markAsDirty(),i.updateValueAndValidity()}),this.validateForm.invalid)return;let{id:t,role:e,position:a}=this.validateForm.value;if(t){let i=this.listOfData.findIndex(_=>_.id==t),s=this.roleType.find(_=>_.value==e),c=this.positionType.find(_=>_.value==a);this.listOfData[i]=y(x({},this.validateForm.value),{roleName:s.label,positionName:c.label,createTime:F(new Date)})}else{let i=this.listOfData.length,s=this.roleType.find(_=>_.value==e),c=this.positionType.find(_=>_.value==a);this.listOfData.push(y(x({},this.validateForm.value),{id:i,roleName:s.label,positionName:c.label,createTime:F(new Date)}))}this.listOfData=[...this.listOfData],this.addHeroCancel(),this.message.create("success",t?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),localStorage.setItem("hero_data",JSON.stringify(this.listOfData))}onCurrentPageDataChange(t){this.listOfCurrentPageData=t,this.refreshCheckedStatus()}onAllChecked(t){this.listOfCurrentPageData.filter(({disabled:e})=>!e).forEach(({id:e})=>this.updateCheckedSet(e,t)),this.refreshCheckedStatus()}updateCheckedSet(t,e){e?this.setOfCheckedId.add(t):this.setOfCheckedId.delete(t)}refreshCheckedStatus(){let t=this.listOfCurrentPageData.filter(({disabled:e})=>!e);this.checked=t.every(({id:e})=>this.setOfCheckedId.has(e)),this.indeterminate=t.some(({id:e})=>this.setOfCheckedId.has(e))&&!this.checked}onItemChecked(t,e){this.updateCheckedSet(t,e),this.refreshCheckedStatus()}batchDelete(){if(console.log(this.setOfCheckedId.size),this.setOfCheckedId.size==0){this.message.create("warning","\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u82F1\u96C4");return}this.modal.confirm({nzTitle:"\u662F\u5426\u786E\u8BA4\u8FDB\u884C\u6279\u91CF\u5220\u9664?",nzOkText:"\u662F",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{this.listOfData=this.listOfData.filter(t=>!this.setOfCheckedId.has(t.id)),this.listOfData=[...this.listOfData],localStorage.setItem("hero_data",JSON.stringify(this.listOfData)),this.message.create("success","\u6279\u91CF\u5220\u9664\u6210\u529F")},nzCancelText:"\u5426",nzOnCancel:()=>{}})}static \u0275fac=function(e){return new(e||n)(D(E),D(_e),D(re),D(ee))};static \u0275cmp=I({type:n,selectors:[["app-home-one"]],decls:27,vars:5,consts:[["basicTable",""],["extraTemplate",""],["accountErrorTpl",""],["mobileErrorTpl",""],["roleErrorTpl",""],["positionErrorTpl",""],["remarkErrorTpl",""],[3,"nzTitle"],[3,"nzCurrentPageDataChange","nzData"],["nzLabel","Select all",3,"nzCheckedChange","nzChecked","nzIndeterminate"],["nzRight",""],["nzTitle","\u6DFB\u52A0\u82F1\u96C4",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],[4,"nzModalContent"],[3,"nzCheckedChange","nzChecked","nzLabel"],["nz-button","","nzType","link",3,"click"],["nzType","vertical"],["nz-button","","nzType","link","nzDanger","",3,"click"],["nz-button","","nzType","primary",2,"margin-right","15px",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-form","",3,"ngSubmit","formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","name","placeholder","\u8BF7\u8F93\u5165\u59D3\u540D","maxlength","8"],["nz-input","","formControlName","mobile","placeholder","\u8BF7\u8F93\u5165\u624B\u673A\u53F7","maxlength","11"],["formControlName","role","nzAllowClear","","nzPlaceHolder","\u8BF7\u9009\u62E9\u89D2\u8272"],["nzValue","1","nzLabel","\u5251\u58EB"],["nzValue","2","nzLabel","\u5C04\u624B"],["nzValue","3","nzLabel","\u5766\u514B"],["nzValue","4","nzLabel","\u6CD5\u5E08"],["formControlName","position","nzAllowClear","","nzPlaceHolder","\u8BF7\u9009\u62E9\u4F4D\u7F6E"],["nzValue","1","nzLabel","\u4E0A\u5355"],["nzValue","2","nzLabel","\u4E2D\u5355"],["nzValue","3","nzLabel","\u6253\u91CE"],["nzValue","4","nzLabel","ADC"],["nzValue","5","nzLabel","\u8F85\u52A9"],["rows","4","formControlName","remark","nz-input","","maxlength","20"]],template:function(e,a){if(e&1){let i=T();r(0,"nz-card",7)(1,"nz-table",8,0),z("nzCurrentPageDataChange",function(c){return d(i),f(a.onCurrentPageDataChange(c))}),r(3,"thead")(4,"tr")(5,"th",9),z("nzCheckedChange",function(c){return d(i),f(a.onAllChecked(c))}),o(),r(6,"th"),l(7,"\u59D3\u540D"),o(),r(8,"th"),l(9,"\u624B\u673A\u53F7"),o(),r(10,"th"),l(11,"\u89D2\u8272"),o(),r(12,"th"),l(13,"\u4F4D\u7F6E"),o(),r(14,"th"),l(15,"\u5907\u6CE8"),o(),r(16,"th"),l(17,"\u6DFB\u52A0\u65F6\u95F4"),o(),r(18,"th",10),l(19,"\u64CD\u4F5C"),o()()(),r(20,"tbody"),B(21,Me,20,8,"tr",null,M),o()()(),u(23,Be,6,0,"ng-template",null,1,v),r(25,"nz-modal",11),j("nzVisibleChange",function(c){return d(i),$(a.addHeroModal,c)||(a.addHeroModal=c),f(c)}),z("nzOnCancel",function(){return d(i),f(a.addHeroCancel())})("nzOnOk",function(){return d(i),f(a.addHeroOk())}),u(26,Ue,46,16,"ng-container",12),o()}if(e&2){let i=g(2),s=g(24);p("nzTitle",s),m(),p("nzData",a.listOfData),m(4),p("nzChecked",a.checked)("nzIndeterminate",a.indeterminate),m(16),A(i.data),m(4),P("nzVisible",a.addHeroModal)}},dependencies:[le,oe,ae,ie,se,me,pe,ce,de,ue,fe,Ce,Ee,Se,De,be,ye,xe,ke,ve,Te,he,ze,Fe,ge,Oe,K,W,U,Y,Z,Q,X]})};var Ye=[{path:"homeOne",component:k,data:{breadcrumb:"\u82F1\u96C4\u7BA1\u7406"}}],Ve=J.forChild(Ye);var Ie=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=w({type:n});static \u0275inj=H({imports:[q,Ve,Ne,te,ne]})};export{Ie as HomeManageModule};
